<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Highly Efficient FFT for Exascale: HeFFTe v2.3: Plan transformation logic</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="heffte.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Highly Efficient FFT for Exascale: HeFFTe v2.3
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('group__fft3dplan.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">Plan transformation logic<div class="ingroups"><a class="el" href="group__fft3d.html">Fast Fourier Transform</a></div></div>  </div>
</div><!--header-->
<div class="contents">
<div class="dynheader">
Collaboration diagram for Plan transformation logic:</div>
<div class="dyncontent">
<div class="center"><img src="group__fft3dplan.png" border="0" usemap="#agroup____fft3dplan" alt=""/></div>
<map name="agroup____fft3dplan" id="agroup____fft3dplan">
<area shape="rect" title=" " alt="" coords="208,5,343,45"/>
<area shape="rect" href="group__fft3d.html" title=" " alt="" coords="5,13,160,38"/>
</map>
</div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structheffte_1_1logic__plan3d.html">heffte::logic_plan3d&lt; index &gt;</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">The logic plan incorporates the order and types of operations in a transform.  <a href="structheffte_1_1logic__plan3d.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ga01f9a488cdef3d2603c9be4fda2eaa7e"><td class="memTemplParams" colspan="2"><a id="ga01f9a488cdef3d2603c9be4fda2eaa7e"></a>
template&lt;typename index &gt; </td></tr>
<tr class="memitem:ga01f9a488cdef3d2603c9be4fda2eaa7e"><td class="memTemplItemLeft" align="right" valign="top">std::array&lt; bool, 3 &gt;&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="group__fft3dplan.html#ga01f9a488cdef3d2603c9be4fda2eaa7e">heffte::pencil_directions</a> (<a class="el" href="structheffte_1_1box3d.html">box3d</a>&lt; index &gt; const world, std::vector&lt; <a class="el" href="structheffte_1_1box3d.html">box3d</a>&lt; index &gt;&gt; const &amp;boxes)</td></tr>
<tr class="memdesc:ga01f9a488cdef3d2603c9be4fda2eaa7e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns true for each direction where the boxes form pencils (i.e., where the size matches the world size). <br /></td></tr>
<tr class="separator:ga01f9a488cdef3d2603c9be4fda2eaa7e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gadfe5ddda96e7aecb88edc7aeb07dbc91"><td class="memTemplParams" colspan="2">template&lt;typename index &gt; </td></tr>
<tr class="memitem:gadfe5ddda96e7aecb88edc7aeb07dbc91"><td class="memTemplItemLeft" align="right" valign="top"><a class="el" href="structheffte_1_1logic__plan3d.html">logic_plan3d</a>&lt; index &gt;&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="group__fft3dplan.html#gadfe5ddda96e7aecb88edc7aeb07dbc91">heffte::plan_operations</a> (<a class="el" href="structheffte_1_1ioboxes.html">ioboxes</a>&lt; index &gt; const &amp;boxes, int r2c_direction, <a class="el" href="structheffte_1_1plan__options.html">plan_options</a> const options, int const mpi_rank)</td></tr>
<tr class="memdesc:gadfe5ddda96e7aecb88edc7aeb07dbc91"><td class="mdescLeft">&#160;</td><td class="mdescRight">Creates the logic plan with the provided user input.  <a href="group__fft3dplan.html#gadfe5ddda96e7aecb88edc7aeb07dbc91">More...</a><br /></td></tr>
<tr class="separator:gadfe5ddda96e7aecb88edc7aeb07dbc91"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga2a6016e5a6823806ef567e77e765811c"><td class="memTemplParams" colspan="2"><a id="ga2a6016e5a6823806ef567e77e765811c"></a>
template&lt;typename index &gt; </td></tr>
<tr class="memitem:ga2a6016e5a6823806ef567e77e765811c"><td class="memTemplItemLeft" align="right" valign="top">std::vector&lt; std::array&lt; int, 3 &gt; &gt;&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="group__fft3dplan.html#ga2a6016e5a6823806ef567e77e765811c">heffte::compute_grids</a> (<a class="el" href="structheffte_1_1logic__plan3d.html">logic_plan3d</a>&lt; index &gt; const &amp;plan)</td></tr>
<tr class="memdesc:ga2a6016e5a6823806ef567e77e765811c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Assuming the shapes in the plan form grids, reverse engineer the grid dimensions (used in the benchmark). <br /></td></tr>
<tr class="separator:ga2a6016e5a6823806ef567e77e765811c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga6e16ac2c2c2eae77ef2a0d31f39d9625"><td class="memItemLeft" align="right" valign="top"><a id="ga6e16ac2c2c2eae77ef2a0d31f39d9625"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__fft3dplan.html#ga6e16ac2c2c2eae77ef2a0d31f39d9625">heffte::get_any_valid</a> (std::array&lt; int, 3 &gt; current)</td></tr>
<tr class="memdesc:ga6e16ac2c2c2eae77ef2a0d31f39d9625"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns either 0, 1, 2, so that it does not match any of the current values. <br /></td></tr>
<tr class="separator:ga6e16ac2c2c2eae77ef2a0d31f39d9625"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gae9d7480eb0065c274720664d2e06b7ab"><td class="memTemplParams" colspan="2"><a id="gae9d7480eb0065c274720664d2e06b7ab"></a>
template&lt;typename index &gt; </td></tr>
<tr class="memitem:gae9d7480eb0065c274720664d2e06b7ab"><td class="memTemplItemLeft" align="right" valign="top">bool&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="group__fft3dplan.html#gae9d7480eb0065c274720664d2e06b7ab">heffte::is_pencils</a> (<a class="el" href="structheffte_1_1box3d.html">box3d</a>&lt; index &gt; const world, std::vector&lt; <a class="el" href="structheffte_1_1box3d.html">box3d</a>&lt; index &gt;&gt; const &amp;shape, std::vector&lt; int &gt; const directions)</td></tr>
<tr class="memdesc:gae9d7480eb0065c274720664d2e06b7ab"><td class="mdescLeft">&#160;</td><td class="mdescRight">Checks if using pencils in multiple directions simultaneously. <br /></td></tr>
<tr class="separator:gae9d7480eb0065c274720664d2e06b7ab"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga4289d61ea0ede892b8fb101e1d0c44ba"><td class="memTemplParams" colspan="2"><a id="ga4289d61ea0ede892b8fb101e1d0c44ba"></a>
template&lt;typename index &gt; </td></tr>
<tr class="memitem:ga4289d61ea0ede892b8fb101e1d0c44ba"><td class="memTemplItemLeft" align="right" valign="top">std::vector&lt; <a class="el" href="structheffte_1_1box3d.html">box3d</a>&lt; index &gt; &gt;&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="group__fft3dplan.html#ga4289d61ea0ede892b8fb101e1d0c44ba">heffte::apply_r2c</a> (std::vector&lt; <a class="el" href="structheffte_1_1box3d.html">box3d</a>&lt; index &gt;&gt; const &amp;shape, int r2c_direction)</td></tr>
<tr class="memdesc:ga4289d61ea0ede892b8fb101e1d0c44ba"><td class="mdescLeft">&#160;</td><td class="mdescRight">Applies the r2c direction reduction to the set of boxes. <br /></td></tr>
<tr class="separator:ga4289d61ea0ede892b8fb101e1d0c44ba"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gac5e047dfb7fdb8d7c39757393a595b1b"><td class="memTemplParams" colspan="2"><a id="gac5e047dfb7fdb8d7c39757393a595b1b"></a>
template&lt;typename index &gt; </td></tr>
<tr class="memitem:gac5e047dfb7fdb8d7c39757393a595b1b"><td class="memTemplItemLeft" align="right" valign="top">bool&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="group__fft3dplan.html#gac5e047dfb7fdb8d7c39757393a595b1b">heffte::order_is_identical</a> (std::vector&lt; <a class="el" href="structheffte_1_1box3d.html">box3d</a>&lt; index &gt;&gt; const &amp;shape)</td></tr>
<tr class="memdesc:gac5e047dfb7fdb8d7c39757393a595b1b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Checks whether all boxes in the shape have the same order. <br /></td></tr>
<tr class="separator:gac5e047dfb7fdb8d7c39757393a595b1b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gad69850e423514f527b7614542f978712"><td class="memItemLeft" align="right" valign="top"><a id="gad69850e423514f527b7614542f978712"></a>
std::array&lt; int, 3 &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__fft3dplan.html#gad69850e423514f527b7614542f978712">heffte::new_order</a> (std::array&lt; int, 3 &gt; current_order, int dimension)</td></tr>
<tr class="memdesc:gad69850e423514f527b7614542f978712"><td class="mdescLeft">&#160;</td><td class="mdescRight">Swaps the entries so that the dimension will come first. <br /></td></tr>
<tr class="separator:gad69850e423514f527b7614542f978712"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gad54d61dfedc510d6a26a8721db33ea1c"><td class="memTemplParams" colspan="2">template&lt;typename index &gt; </td></tr>
<tr class="memitem:gad54d61dfedc510d6a26a8721db33ea1c"><td class="memTemplItemLeft" align="right" valign="top">std::vector&lt; <a class="el" href="structheffte_1_1box3d.html">box3d</a>&lt; index &gt; &gt;&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="group__fft3dplan.html#gad54d61dfedc510d6a26a8721db33ea1c">heffte::next_pencils_shape</a> (<a class="el" href="structheffte_1_1box3d.html">box3d</a>&lt; index &gt; const world, std::array&lt; int, 2 &gt; const proc_grid, int const dimension, std::vector&lt; <a class="el" href="structheffte_1_1box3d.html">box3d</a>&lt; index &gt;&gt; const &amp;source, bool const use_reorder, <a class="el" href="structheffte_1_1box3d.html">box3d</a>&lt; index &gt; const world_out, std::vector&lt; int &gt; const test_directions, std::vector&lt; <a class="el" href="structheffte_1_1box3d.html">box3d</a>&lt; index &gt;&gt; const &amp;boxes_out, <a class="el" href="structheffte_1_1rank__remap.html">rank_remap</a> const &amp;remap)</td></tr>
<tr class="memdesc:gad54d61dfedc510d6a26a8721db33ea1c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Creates the next box geometry that corresponds to pencils in the given dimension.  <a href="group__fft3dplan.html#gad54d61dfedc510d6a26a8721db33ea1c">More...</a><br /></td></tr>
<tr class="separator:gad54d61dfedc510d6a26a8721db33ea1c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga3aefa3579fb44dffda91c9f8865dd75a"><td class="memTemplParams" colspan="2"><a id="ga3aefa3579fb44dffda91c9f8865dd75a"></a>
template&lt;typename index &gt; </td></tr>
<tr class="memitem:ga3aefa3579fb44dffda91c9f8865dd75a"><td class="memTemplItemLeft" align="right" valign="top">std::vector&lt; <a class="el" href="structheffte_1_1box3d.html">box3d</a>&lt; index &gt; &gt;&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="group__fft3dplan.html#ga3aefa3579fb44dffda91c9f8865dd75a">heffte::next_pencils_shape0</a> (<a class="el" href="structheffte_1_1box3d.html">box3d</a>&lt; index &gt; const world, std::array&lt; int, 2 &gt; const proc_grid, int const dimension, int const r2c_direction, std::vector&lt; <a class="el" href="structheffte_1_1box3d.html">box3d</a>&lt; index &gt;&gt; const &amp;source, bool const use_reorder, <a class="el" href="structheffte_1_1box3d.html">box3d</a>&lt; index &gt; const world_out, std::vector&lt; int &gt; const test_directions, std::vector&lt; <a class="el" href="structheffte_1_1box3d.html">box3d</a>&lt; index &gt;&gt; const &amp;boxes_out, <a class="el" href="structheffte_1_1rank__remap.html">rank_remap</a> const &amp;remap)</td></tr>
<tr class="memdesc:ga3aefa3579fb44dffda91c9f8865dd75a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Similar to <a class="el" href="group__fft3dplan.html#gad54d61dfedc510d6a26a8721db33ea1c" title="Creates the next box geometry that corresponds to pencils in the given dimension.">next_pencils_shape()</a> but handles a special case of the r2c transformation. <br /></td></tr>
<tr class="separator:ga3aefa3579fb44dffda91c9f8865dd75a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga00780fb8830f8a5ca9b23db46315d9b3"><td class="memTemplParams" colspan="2">template&lt;typename index &gt; </td></tr>
<tr class="memitem:ga00780fb8830f8a5ca9b23db46315d9b3"><td class="memTemplItemLeft" align="right" valign="top"><a class="el" href="structheffte_1_1logic__plan3d.html">logic_plan3d</a>&lt; index &gt;&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="group__fft3dplan.html#ga00780fb8830f8a5ca9b23db46315d9b3">heffte::plan_pencil_reshapes</a> (<a class="el" href="structheffte_1_1box3d.html">box3d</a>&lt; index &gt; world_in, <a class="el" href="structheffte_1_1box3d.html">box3d</a>&lt; index &gt; world_out, <a class="el" href="structheffte_1_1ioboxes.html">ioboxes</a>&lt; index &gt; const &amp;boxes, int r2c_direction, <a class="el" href="structheffte_1_1plan__options.html">plan_options</a> const opts, <a class="el" href="structheffte_1_1rank__remap.html">rank_remap</a> const &amp;remap)</td></tr>
<tr class="memdesc:ga00780fb8830f8a5ca9b23db46315d9b3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Creates a plan of reshape operations using pencil decomposition.  <a href="group__fft3dplan.html#ga00780fb8830f8a5ca9b23db46315d9b3">More...</a><br /></td></tr>
<tr class="separator:ga00780fb8830f8a5ca9b23db46315d9b3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga6a746cf133878c2dbdb54cf8d332864a"><td class="memTemplParams" colspan="2"><a id="ga6a746cf133878c2dbdb54cf8d332864a"></a>
template&lt;typename index &gt; </td></tr>
<tr class="memitem:ga6a746cf133878c2dbdb54cf8d332864a"><td class="memTemplItemLeft" align="right" valign="top">std::vector&lt; <a class="el" href="structheffte_1_1box3d.html">box3d</a>&lt; index &gt; &gt;&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="group__fft3dplan.html#ga6a746cf133878c2dbdb54cf8d332864a">heffte::reorder_slabs</a> (std::vector&lt; <a class="el" href="structheffte_1_1box3d.html">box3d</a>&lt; index &gt;&gt; const &amp;slabs, int dimension, bool use_reorder)</td></tr>
<tr class="memdesc:ga6a746cf133878c2dbdb54cf8d332864a"><td class="mdescLeft">&#160;</td><td class="mdescRight">If <b>use_reorder</b> is false, then returns a copy of the slabs, otherwise changes the order so that dimension comes first. <br /></td></tr>
<tr class="separator:ga6a746cf133878c2dbdb54cf8d332864a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga19b6bcaafb270f22b626c9fb6654f33e"><td class="memTemplParams" colspan="2"><a id="ga19b6bcaafb270f22b626c9fb6654f33e"></a>
template&lt;typename index &gt; </td></tr>
<tr class="memitem:ga19b6bcaafb270f22b626c9fb6654f33e"><td class="memTemplItemLeft" align="right" valign="top"><a class="el" href="structheffte_1_1logic__plan3d.html">logic_plan3d</a>&lt; index &gt;&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="group__fft3dplan.html#ga19b6bcaafb270f22b626c9fb6654f33e">heffte::plan_slab_reshapes</a> (<a class="el" href="structheffte_1_1box3d.html">box3d</a>&lt; index &gt; world_in, <a class="el" href="structheffte_1_1box3d.html">box3d</a>&lt; index &gt; world_out, <a class="el" href="structheffte_1_1ioboxes.html">ioboxes</a>&lt; index &gt; const &amp;boxes, int r2c_direction, <a class="el" href="structheffte_1_1plan__options.html">plan_options</a> const opts, <a class="el" href="structheffte_1_1rank__remap.html">rank_remap</a> const &amp;remap)</td></tr>
<tr class="memdesc:ga19b6bcaafb270f22b626c9fb6654f33e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Creates a plan of reshape operations using slab decomposition. <br /></td></tr>
<tr class="separator:ga19b6bcaafb270f22b626c9fb6654f33e"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>Implements the analysis of the input and output distribution of the boxes and creates the corresponding plan for reshape and 1-D FFT operations. </p>
<h2 class="groupheader">Function Documentation</h2>
<a id="gadfe5ddda96e7aecb88edc7aeb07dbc91"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gadfe5ddda96e7aecb88edc7aeb07dbc91">&#9670;&nbsp;</a></span>plan_operations()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename index &gt; </div>
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structheffte_1_1logic__plan3d.html">logic_plan3d</a>&lt; index &gt; heffte::plan_operations </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structheffte_1_1ioboxes.html">ioboxes</a>&lt; index &gt; const &amp;&#160;</td>
          <td class="paramname"><em>boxes</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>r2c_direction</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structheffte_1_1plan__options.html">plan_options</a> const&#160;</td>
          <td class="paramname"><em>options</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int const&#160;</td>
          <td class="paramname"><em>mpi_rank</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Creates the logic plan with the provided user input. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">boxes</td><td>is the current distribution of the data across the MPI comm </td></tr>
    <tr><td class="paramname">r2c_direction</td><td>is the direction is the direction of shrinking of the data for an r2c transform the c2c case should use -1 </td></tr>
    <tr><td class="paramname">options</td><td>is a set of <a class="el" href="structheffte_1_1plan__options.html" title="Defines a set of tweaks and options to use in the plan generation.">heffte::plan_options</a> to use</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>the plan for reshape and 1-D fft transformations </dd></dl>

</div>
</div>
<a id="gad54d61dfedc510d6a26a8721db33ea1c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gad54d61dfedc510d6a26a8721db33ea1c">&#9670;&nbsp;</a></span>next_pencils_shape()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename index &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt;<a class="el" href="structheffte_1_1box3d.html">box3d</a>&lt;index&gt; &gt; heffte::next_pencils_shape </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structheffte_1_1box3d.html">box3d</a>&lt; index &gt; const&#160;</td>
          <td class="paramname"><em>world</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::array&lt; int, 2 &gt; const&#160;</td>
          <td class="paramname"><em>proc_grid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int const&#160;</td>
          <td class="paramname"><em>dimension</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::vector&lt; <a class="el" href="structheffte_1_1box3d.html">box3d</a>&lt; index &gt;&gt; const &amp;&#160;</td>
          <td class="paramname"><em>source</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool const&#160;</td>
          <td class="paramname"><em>use_reorder</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structheffte_1_1box3d.html">box3d</a>&lt; index &gt; const&#160;</td>
          <td class="paramname"><em>world_out</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::vector&lt; int &gt; const&#160;</td>
          <td class="paramname"><em>test_directions</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::vector&lt; <a class="el" href="structheffte_1_1box3d.html">box3d</a>&lt; index &gt;&gt; const &amp;&#160;</td>
          <td class="paramname"><em>boxes_out</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structheffte_1_1rank__remap.html">rank_remap</a> const &amp;&#160;</td>
          <td class="paramname"><em>remap</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Creates the next box geometry that corresponds to pencils in the given dimension. </p>
<p>Similar to <a class="el" href="group__fft3dgeometry.html#gacc239bfe5a333acdb4ca86b3b31a8fa6" title="Breaks the world into a grid of pencils and orders the pencils to the ranks that will minimize commun...">heffte::make_pencils()</a>, splits the <b>world</b> into a two dimensional processor grid defined by <b>proc_grid</b> so that the boxes form pencils in the given third <b>dimension</b>. The <b>source</b> corresponds to the current processor grid and is needed to that the next set of boxes will be arranges in way that will improve the overlap with the old set. If <b>use_reorder</b> is set, the new configuration will be transposed so that the <b>dimension</b> will be the new leading (fast) direction.</p>
<p>The <b>world_out</b> and <b>boxes_out</b> correspond to the output geometry of the FFT transformation. If the final geometry satisfies the pencil and order requirements, and if the geometry also gives pencils in the <b>test_directions</b>, then it is best to directly jump to the final configuration. </p>

</div>
</div>
<a id="ga00780fb8830f8a5ca9b23db46315d9b3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga00780fb8830f8a5ca9b23db46315d9b3">&#9670;&nbsp;</a></span>plan_pencil_reshapes()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename index &gt; </div>
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structheffte_1_1logic__plan3d.html">logic_plan3d</a>&lt;index&gt; heffte::plan_pencil_reshapes </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structheffte_1_1box3d.html">box3d</a>&lt; index &gt;&#160;</td>
          <td class="paramname"><em>world_in</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structheffte_1_1box3d.html">box3d</a>&lt; index &gt;&#160;</td>
          <td class="paramname"><em>world_out</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structheffte_1_1ioboxes.html">ioboxes</a>&lt; index &gt; const &amp;&#160;</td>
          <td class="paramname"><em>boxes</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>r2c_direction</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structheffte_1_1plan__options.html">plan_options</a> const&#160;</td>
          <td class="paramname"><em>opts</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structheffte_1_1rank__remap.html">rank_remap</a> const &amp;&#160;</td>
          <td class="paramname"><em>remap</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Creates a plan of reshape operations using pencil decomposition. </p>
<p>Note that this algorithm will still recognize and utilize the case when the input or output boxes are in slab configuration, but in the general case this will use multiple pencil reshapes. </p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1 </li>
  </ul>
</div>
</body>
</html>
